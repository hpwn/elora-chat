# ============================
# Global
# ============================
TZ=America/Phoenix
LOG_LEVEL=info

# Docker images (override when publishing prebuilt images)
ELORA_IMAGE=elora-chat:latest
GNASTY_IMAGE=gnasty-chat:latest

# Project/network names
COMPOSE_PROJECT_NAME=elora
ELORA_DOCKER_NETWORK=elora-network

# Shared persistent volume path inside containers
ELORA_DATA_DIR=/data

# ============================
# elora-chat (API/WS + SQLite store)
# ============================
ELORA_HTTP_ADDR=0.0.0.0
ELORA_HTTP_PORT=8080

# SQLite persistent database
ELORA_DB_MODE=persistent
ELORA_DB_PATH=/data/elora.db
ELORA_SQLITE_JOURNAL_MODE=wal
ELORA_SQLITE_BUSY_TIMEOUT_MS=2000
ELORA_DB_MAX_CONNS=16
ELORA_DB_PRAGMAS_EXTRA=mmap_size=268435456,cache_size=-100000,temp_store=MEMORY

# CORS / WS origins (comma-separated)
ELORA_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080,https://hpwn.github.io

# WebSocket tuning
ELORA_WS_PING_INTERVAL_MS=25000
ELORA_WS_PONG_WAIT_MS=30000
ELORA_WS_WRITE_DEADLINE_MS=5000
ELORA_WS_MAX_MESSAGE_BYTES=131072

# DB tailer / publisher tuning
ELORA_DB_TAIL_ENABLED=1
ELORA_TAILER_POLL_MS=25
ELORA_TAILER_MAX_BATCH=250
ELORA_TAILER_MAX_LAG_MS=50
ELORA_TAILER_PERSIST_OFFSETS=1
# Optional: override the persisted cursor path (defaults to <ELORA_DB_PATH>.offset.json)
# ELORA_TAILER_OFFSET_PATH=/data/elora.offset.json

# UI presentation toggles served by the API
ELORA_UI_YT_PREFIX_AT=0
ELORA_UI_SHOW_BADGES=1

# Chat ingest (use chatdownloader or gnasty)
ELORA_INGEST_DRIVER=chatdownloader
GNASTY_BIN=
GNASTY_ARGS=--stdout,--format,ndjson
GNASTY_BACKOFF_BASE_MS=1000
GNASTY_BACKOFF_MAX_MS=30000

# ============================
# gnasty-harvester (Twitch IRC + YouTube Live)
# ============================
GNASTY_HTTP_ADDR=0.0.0.0
GNASTY_HTTP_PORT=8765

# Twitch
GNASTY_TWITCH_ENABLED=1
GNASTY_TWITCH_CHANNELS=rifftrax
GNASTY_TWITCH_LOGIN=hp_az
GNASTY_TWITCH_TOKEN_FILE=/data/twitch_irc.pass
GNASTY_TWITCH_REFRESH_FILE=/data/twitch_refresh.pass
GNASTY_TWITCH_CLIENT_ID=
GNASTY_TWITCH_CLIENT_SECRET=
GNASTY_TWITCH_REJOIN_BACKOFF_MS=5000
GNASTY_TWITCH_HEARTBEAT_SECS=300

# YouTube
GNASTY_YT_ENABLED=1
GNASTY_YT_API_KEY=
GNASTY_YT_CHANNEL_IDS=
GNASTY_YT_POLL_INTERVAL_MS=1500

# Backpressure / sink behavior
GNASTY_SINK_SQLITE_PATH=/data/elora.db
GNASTY_SINK_FLUSH_MAX_MS=50
GNASTY_SINK_BATCH_SIZE=200

# ============================
# OAuth (future)
# ============================
TWITCH_OAUTH_CLIENT_ID=
TWITCH_OAUTH_CLIENT_SECRET=
TWITCH_OAUTH_REDIRECT_URL=

GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URL=

# ============================
# Frontend (Vite-style build vars)
# ============================
VITE_PUBLIC_API_BASE=http://localhost:8080
VITE_PUBLIC_WS_URL=ws://localhost:8080/ws/chat
VITE_PUBLIC_HIDE_YT_AT=1
VITE_PUBLIC_SHOW_BADGES=1
VITE_CHAT_DEBUG=0
